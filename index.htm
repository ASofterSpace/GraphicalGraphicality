<html>

	<head>
	</head>

	<body>
		<canvas id="output" width="1000" height="500" style="width:1000px;height:500px;">
			Ooops, your browser does not seem to support the HTML5 canvas - please use a newer browser!
		</canvas>

		<br>

		<button onclick="increaseSize()">Bigger!</button>

		<button onclick="decreaseSize()">Smaller!</button>

		<script type="text/javascript">

width = 1000;
height = 500;

function calcSin(x) {
	return height/2 + (width/12.5)*Math.sin(x/(width/12.5));
}

function calcCos(x) {
	return height/2 + (width/12.5)*Math.sin((x/(width/12.5))+1.57);
}

function drawCosBack(ctx, origx, origy, comparator) {

	var cosx=origx-1;
	var siny = calcSin(cosx);
	var cosy = calcCos(cosx);
	for (; (cosx > -1) && comparator(siny, cosy); cosx--) {
		siny = calcSin(cosx);
		cosy = calcCos(cosx);
		ctx.lineTo(cosx, cosy);
	}
	ctx.fill();
	ctx.beginPath();
	ctx.moveTo(origx, origy);
}

function drawAll() {
	
	var canvas = document.getElementById('output');
	var ctx = canvas.getContext("2d");
	
	// draw outline
	ctx.moveTo(0, 0);
	ctx.lineTo(width, 0);
	ctx.lineTo(width, height);
	ctx.lineTo(0, height);
	ctx.lineTo(0, 0);
	ctx.stroke();
	
	// draw sine
	ctx.beginPath();
	ctx.moveTo(0, calcSin(0));
	var checkSmaller = false;
	
	for (var sinx=0; sinx < width; sinx++) {
	
		var siny = calcSin(sinx);
		var cosy = calcCos(sinx);
		ctx.lineTo(sinx, siny);
	
		if (checkSmaller && (siny < cosy)) {
			drawCosBack(ctx, sinx, siny, function (s, c) {return s > c;});
			checkSmaller = !checkSmaller;
		} else if ((!checkSmaller) && (siny > cosy)) {
			drawCosBack(ctx, sinx, siny, function (s, c) {return s < c;});
			checkSmaller = !checkSmaller;
		}
	}
	
	if (checkSmaller) {
		drawCosBack(ctx, sinx, siny, function (s, c) {return s > c;});
	} else {
		drawCosBack(ctx, sinx, siny, function (s, c) {return s < c;});
	}
}

function increaseSize() {

	width *= 1.5;
	height = width / 2;

	updateSize();
}

function decreaseSize() {

	width *= 2/3;
	height = width / 2;

	updateSize();
}

function updateSize() {

	var canvas = document.getElementById('output');

	canvas.width = width;
	canvas.height = height;
	canvas.style.width = width;
	canvas.style.height = height;

	drawAll();
}

drawAll();
		</script>
	</body>

</html>